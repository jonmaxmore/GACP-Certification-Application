# ğŸ›ï¸ GACP Platform - à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸¢à¸±à¹ˆà¸‡à¸¢à¸·à¸™à¸£à¸°à¸”à¸±à¸šà¸¡à¸²à¸•à¸£à¸à¸²à¸™à¸›à¸£à¸°à¹€à¸—à¸¨

**à¸§à¸±à¸™à¸—à¸µà¹ˆà¸ˆà¸±à¸”à¸—à¸³:** 12 à¸•à¸¸à¸¥à¸²à¸„à¸¡ 2568  
**à¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸—à¸³:** System Architect  
**à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡:** DGA Standards, Government Cloud Standards, PDPA Compliance

---

## ğŸ¯ à¸§à¸´à¸ªà¸±à¸¢à¸—à¸±à¸¨à¸™à¹Œ

> **"à¸ªà¸£à¹‰à¸²à¸‡à¸£à¸°à¸šà¸šà¸£à¸±à¸šà¸£à¸­à¸‡à¸¡à¸²à¸•à¸£à¸à¸²à¸™ GACP à¸—à¸µà¹ˆà¸¢à¸±à¹ˆà¸‡à¸¢à¸·à¸™ à¹€à¸›à¹‡à¸™à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¸£à¸°à¸”à¸±à¸šà¸›à¸£à¸°à¹€à¸—à¸¨
> à¹à¸¥à¸°à¸à¸£à¹‰à¸­à¸¡à¸‚à¸¢à¸²à¸¢à¹€à¸›à¹‡à¸™à¹à¸à¸¥à¸•à¸Ÿà¸­à¸£à¹Œà¸¡à¸à¸¥à¸²à¸‡à¸ªà¸³à¸«à¸£à¸±à¸šà¸¡à¸²à¸•à¸£à¸à¸²à¸™à¸à¸²à¸£à¹€à¸à¸©à¸•à¸£à¹„à¸—à¸¢à¸—à¸¸à¸à¸›à¸£à¸°à¹€à¸ à¸—"**

---

## ğŸ“Š à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸: **Modular Monolith â†’ Microservices-Ready**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GACP NATIONAL STANDARD PLATFORM                   â”‚
â”‚                      (Modular Monolith Architecture)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚   Module 1   â”‚  â”‚   Module 2   â”‚  â”‚   Module 3   â”‚           â”‚
â”‚   â”‚ Auth & User  â”‚  â”‚ Application  â”‚  â”‚ Certificate  â”‚           â”‚
â”‚   â”‚ Management   â”‚  â”‚   Workflow   â”‚  â”‚ Management   â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚   Module 4   â”‚  â”‚   Module 5   â”‚  â”‚   Module 6   â”‚           â”‚
â”‚   â”‚     Farm     â”‚  â”‚    Survey    â”‚  â”‚ Track&Trace  â”‚           â”‚
â”‚   â”‚ Management   â”‚  â”‚    System    â”‚  â”‚    System    â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚   Module 7   â”‚  â”‚   Module 8   â”‚  â”‚   Module 9   â”‚           â”‚
â”‚   â”‚  Standards   â”‚  â”‚  Dashboard   â”‚  â”‚ Notification â”‚           â”‚
â”‚   â”‚  Comparison  â”‚  â”‚  Analytics   â”‚  â”‚   Service    â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚              SHARED INFRASTRUCTURE LAYER                  â”‚   â”‚
â”‚   â”‚  â€¢ Logging â€¢ Monitoring â€¢ Security â€¢ Cache â€¢ Queue       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                   DATA ACCESS LAYER                       â”‚   â”‚
â”‚   â”‚          MongoDB Cluster (Replica Set + Sharding)         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… à¸—à¸³à¹„à¸¡à¸–à¸¶à¸‡à¹€à¸›à¹‡à¸™ "à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¸£à¸°à¸”à¸±à¸šà¸›à¸£à¸°à¹€à¸—à¸¨"

### **1ï¸âƒ£ à¸•à¸²à¸¡à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¸ªà¸²à¸à¸¥ (International Standards)**

#### **A. Domain-Driven Design (DDD)**

```
âœ… Bounded Context à¸Šà¸±à¸”à¹€à¸ˆà¸™ (à¹à¸•à¹ˆà¸¥à¸° Module = 1 Domain)
âœ… Ubiquitous Language (à¹ƒà¸Šà¹‰à¸ à¸²à¸©à¸²à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸š business)
âœ… Aggregate Roots (User, Application, Certificate, Farm, etc.)
âœ… Domain Events (ApplicationSubmitted, CertificateIssued, etc.)
```

#### **B. Clean Architecture**

```
modules/
  â””â”€â”€ certificate-management/           â† Bounded Context
      â”œâ”€â”€ domain/                        â† Enterprise Business Rules
      â”‚   â”œâ”€â”€ entities/                  (Certificate, CertificateTemplate)
      â”‚   â”œâ”€â”€ value-objects/             (CertificateNumber, ExpiryDate)
      â”‚   â””â”€â”€ events/                    (CertificateIssued, CertificateRevoked)
      â”‚
      â”œâ”€â”€ application/                   â† Application Business Rules
      â”‚   â”œâ”€â”€ use-cases/                 (GenerateCertificate, VerifyCertificate)
      â”‚   â”œâ”€â”€ services/                  (CertificateService)
      â”‚   â””â”€â”€ interfaces/                (ICertificateRepository)
      â”‚
      â”œâ”€â”€ infrastructure/                â† Frameworks & Drivers
      â”‚   â”œâ”€â”€ database/                  (MongoDBCertificateRepository)
      â”‚   â”œâ”€â”€ pdf/                       (PDFGenerator)
      â”‚   â””â”€â”€ qrcode/                    (QRCodeGenerator)
      â”‚
      â””â”€â”€ presentation/                  â† Interface Adapters
          â”œâ”€â”€ controllers/               (CertificateController)
          â”œâ”€â”€ routes/                    (certificate.routes.js)
          â”œâ”€â”€ validators/                (certificate.validator.js)
          â””â”€â”€ dto/                       (CertificateDTO)
```

#### **C. SOLID Principles**

```
âœ… Single Responsibility (à¹à¸•à¹ˆà¸¥à¸° class à¸—à¸³à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆà¹€à¸”à¸µà¸¢à¸§)
âœ… Open/Closed (à¹€à¸›à¸´à¸”à¹ƒà¸«à¹‰à¸‚à¸¢à¸²à¸¢ à¸›à¸´à¸”à¹ƒà¸«à¹‰à¹à¸à¹‰à¹„à¸‚)
âœ… Liskov Substitution (Subclass à¹à¸—à¸™ Parent à¹„à¸”à¹‰)
âœ… Interface Segregation (Interface à¹€à¸¥à¹‡à¸à¹à¸¥à¸°à¹€à¸‰à¸à¸²à¸°à¹€à¸ˆà¸²à¸°à¸ˆà¸‡)
âœ… Dependency Inversion (Depend on abstractions)
```

---

### **2ï¸âƒ£ à¸•à¸²à¸¡à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¸ à¸²à¸„à¸£à¸±à¸à¹„à¸—à¸¢**

#### **A. Digital Government Development Agency (DGA)**

```
âœ… API Design Standards
   - RESTful API à¸•à¸²à¸¡ OpenAPI 3.0
   - Standardized Error Codes
   - Rate Limiting & Throttling
   - API Versioning (v1, v2, v3)

âœ… Security Standards
   - OAuth 2.0 / JWT Authentication
   - Role-Based Access Control (RBAC)
   - Audit Logging (à¸—à¸¸à¸ action à¸šà¸±à¸™à¸—à¸¶à¸à¸«à¸¡à¸”)
   - Data Encryption (at rest + in transit)

âœ… Interoperability Standards
   - JSON-LD for Linked Data
   - Standard Thai ID Format (à¹€à¸¥à¸‚à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™ 13 à¸«à¸¥à¸±à¸)
   - Standard Address Format (à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¹„à¸—à¸¢)
   - Standard Date/Time (ISO 8601 + Thai Buddhist Calendar)
```

#### **B. Thai Government Cloud Standards**

```
âœ… Infrastructure
   - Multi-AZ Deployment (3+ Availability Zones)
   - Auto-scaling & Load Balancing
   - Disaster Recovery (RPO < 1 hr, RTO < 4 hrs)
   - Backup & Retention (Daily backup, 30 days retention)

âœ… Monitoring & Alerting
   - Health Check Endpoints
   - Performance Metrics (Response time < 2s)
   - Error Rate Monitoring (< 0.1%)
   - Uptime SLA 99.9% (8.76 hours downtime/year)
```

#### **C. PDPA Compliance (à¸.à¸£.à¸š. à¸„à¸¸à¹‰à¸¡à¸„à¸£à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸šà¸¸à¸„à¸„à¸¥)**

```
âœ… Data Privacy
   - Consent Management (à¹€à¸à¹‡à¸š consent à¸—à¸¸à¸à¸„à¸£à¸±à¹‰à¸‡)
   - Right to Access (à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‚à¸­à¸”à¸¹à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸™à¹€à¸­à¸‡à¹„à¸”à¹‰)
   - Right to Delete (à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‚à¸­à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰)
   - Right to Portability (à¸ªà¹ˆà¸‡à¸­à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸”à¹‰)

âœ… Data Security
   - Personal Data Encryption
   - Sensitive Data Masking (à¹€à¸¥à¸‚à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™ ******1234)
   - Data Retention Policy (à¹€à¸à¹‡à¸šà¹„à¸§à¹‰à¹€à¸—à¹ˆà¸²à¸—à¸µà¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™)
   - Data Breach Notification (à¹à¸ˆà¹‰à¸‡ PDPC à¸ à¸²à¸¢à¹ƒà¸™ 72 à¸Šà¸¡.)
```

#### **D. National Single Sign-On (NSO) Ready**

```
âœ… à¸£à¸­à¸‡à¸£à¸±à¸š ThaiD / DGA Authentication
âœ… à¸£à¸­à¸‡à¸£à¸±à¸š SAML 2.0 / OAuth 2.0
âœ… à¸£à¸­à¸‡à¸£à¸±à¸š Mobile ID (à¸¥à¹‡à¸­à¸à¸­à¸´à¸™à¸”à¹‰à¸§à¸¢à¸¡à¸·à¸­à¸–à¸·à¸­)
âœ… à¸£à¸­à¸‡à¸£à¸±à¸š National Digital ID
```

---

### **3ï¸âƒ£ à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¹€à¸‰à¸à¸²à¸°à¸”à¹‰à¸²à¸™à¹€à¸à¸©à¸•à¸£**

#### **A. GAP/GACP Standards (à¸à¸£à¸¡à¸§à¸´à¸Šà¸²à¸à¸²à¸£à¹€à¸à¸©à¸•à¸£)**

```
âœ… GACP Certificate Format (à¸•à¸²à¸¡à¸¡à¸²à¸•à¸£à¸à¸²à¸™ DOA)
âœ… Farm Registration (à¸£à¸«à¸±à¸ªà¹à¸›à¸¥à¸‡à¸›à¸¥à¸¹à¸ 13 à¸«à¸¥à¸±à¸)
âœ… Cultivation SOPs (12-stage cycle)
âœ… Quality Assurance Records
```

#### **B. Traceability Standards**

```
âœ… GS1 Global Standards
   - GTIN (Global Trade Item Number)
   - GLN (Global Location Number)
   - SSCC (Serial Shipping Container Code)

âœ… QR Code Standards
   - ISO/IEC 18004 (QR Code specification)
   - GS1 DataMatrix
   - Secure QR with Digital Signature
```

#### **C. Cannabis-Specific Standards**

```
âœ… à¸•à¸²à¸¡ à¸.à¸£.à¸š. à¸¢à¸²à¹€à¸ªà¸à¸•à¸´à¸”à¹ƒà¸«à¹‰à¹‚à¸—à¸© (à¹à¸à¹‰à¹„à¸‚à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡)
âœ… à¸•à¸²à¸¡à¸›à¸£à¸°à¸à¸²à¸¨à¸à¸£à¸°à¸—à¸£à¸§à¸‡à¸ªà¸²à¸˜à¸²à¸£à¸“à¸ªà¸¸à¸‚
âœ… à¸•à¸²à¸¡à¸¡à¸²à¸•à¸£à¸à¸²à¸™ FDA Thailand
âœ… THC/CBD Testing Standards
```

---

## ğŸš€ à¹à¸œà¸™à¸à¸²à¸£ Migrate à¹à¸šà¸š 3 à¹€à¸Ÿà¸ª (Sustainable Migration)

### **ğŸ“… à¹€à¸Ÿà¸ª 1: Foundation & Standardization (4-6 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ)**

#### **Week 1-2: Clean Architecture Restructure**

```bash
# à¸ˆà¸±à¸”à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸«à¸¡à¹ˆà¸•à¸²à¸¡ Clean Architecture
modules/
  â””â”€â”€ [module-name]/
      â”œâ”€â”€ domain/
      â”‚   â”œâ”€â”€ entities/          # Business objects
      â”‚   â”œâ”€â”€ value-objects/     # Immutable values
      â”‚   â”œâ”€â”€ events/            # Domain events
      â”‚   â””â”€â”€ interfaces/        # Repository interfaces
      â”‚
      â”œâ”€â”€ application/
      â”‚   â”œâ”€â”€ use-cases/         # Business logic
      â”‚   â”œâ”€â”€ services/          # Application services
      â”‚   â””â”€â”€ dto/               # Data transfer objects
      â”‚
      â”œâ”€â”€ infrastructure/
      â”‚   â”œâ”€â”€ database/          # DB implementations
      â”‚   â”œâ”€â”€ external/          # External services
      â”‚   â””â”€â”€ messaging/         # Event bus/queue
      â”‚
      â””â”€â”€ presentation/
          â”œâ”€â”€ controllers/       # HTTP controllers
          â”œâ”€â”€ routes/            # Express routes
          â”œâ”€â”€ validators/        # Input validation
          â””â”€â”€ middleware/        # Route middleware
```

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**

- âœ… 11 modules restructured à¸•à¸²à¸¡ Clean Architecture
- âœ… Clear separation of concerns
- âœ… Testable code (Unit tests, Integration tests)
- âœ… Documentation for each module

---

#### **Week 3-4: API Standardization**

```yaml
# OpenAPI 3.0 Specification
openapi: 3.0.3
info:
  title: GACP National Platform API
  version: 1.0.0
  description: |
    API à¸ªà¸³à¸«à¸£à¸±à¸šà¸£à¸°à¸šà¸šà¸£à¸±à¸šà¸£à¸­à¸‡à¸¡à¸²à¸•à¸£à¸à¸²à¸™ GACP à¸£à¸°à¸”à¸±à¸šà¸›à¸£à¸°à¹€à¸—à¸¨
    à¸•à¸²à¸¡à¸¡à¸²à¸•à¸£à¸à¸²à¸™ DGA à¹à¸¥à¸° Government Cloud
  contact:
    name: GACP Platform Support
    email: support@gacp.go.th
    url: https://gacp.go.th
servers:
  - url: https://api.gacp.go.th/v1
    description: Production (Government Cloud)
  - url: https://api-staging.gacp.go.th/v1
    description: Staging
  - url: http://localhost:3004/api/v1
    description: Local Development

# Standardized Error Codes
components:
  responses:
    ErrorResponse:
      description: Standard Error Response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              error:
                type: object
                properties:
                  code:
                    type: string
                    enum: [
                        'AUTH_001',
                        'AUTH_002',
                        'AUTH_003', # Authentication
                        'VAL_001',
                        'VAL_002',
                        'VAL_003', # Validation
                        'BUS_001',
                        'BUS_002',
                        'BUS_003', # Business Logic
                        'SYS_001',
                        'SYS_002',
                        'SYS_003' # System Error
                      ]
                  message:
                    type: string
                  details:
                    type: object
              timestamp:
                type: string
                format: date-time
              requestId:
                type: string
                format: uuid
```

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**

- âœ… OpenAPI 3.0 documentation
- âœ… Standardized error codes
- âœ… API versioning strategy
- âœ… Rate limiting (100 req/min per user)
- âœ… Request ID tracking

---

#### **Week 5-6: Security & Compliance**

```javascript
// PDPA Compliance Implementation
class PDPAComplianceService {
  // 1. Consent Management
  async recordConsent(userId, purpose, consentType) {
    return await ConsentRecord.create({
      userId,
      purpose,
      consentType,
      consentedAt: new Date(),
      ipAddress: req.ip,
      userAgent: req.headers['user-agent'],
      version: '1.0'
    });
  }

  // 2. Right to Access (à¸‚à¸­à¸”à¸¹à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)
  async exportUserData(userId) {
    const user = await User.findById(userId);
    const applications = await Application.find({ userId });
    const certificates = await Certificate.find({ userId });

    return {
      personalData: user.toJSON(),
      applications: applications.map(a => a.toJSON()),
      certificates: certificates.map(c => c.toJSON()),
      exportedAt: new Date(),
      format: 'JSON'
    };
  }

  // 3. Right to Delete (à¸‚à¸­à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥)
  async deleteUserData(userId, reason) {
    // Soft delete (à¹€à¸à¹‡à¸š log à¹„à¸§à¹‰à¸•à¸²à¸¡ à¸à¸¡.)
    await User.findByIdAndUpdate(userId, {
      status: 'DELETED',
      deletedAt: new Date(),
      deletionReason: reason,
      // Mask personal data
      name: '***',
      email: '***@***.***',
      phone: '***-***-****',
      idCard: '**********1234'
    });
  }

  // 4. Data Breach Notification
  async notifyDataBreach(incidentId, affectedUsers) {
    // à¹à¸ˆà¹‰à¸‡ PDPC à¸ à¸²à¸¢à¹ƒà¸™ 72 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
    await NotificationService.notifyPDPC({
      incidentId,
      affectedCount: affectedUsers.length,
      breachType: 'UNAUTHORIZED_ACCESS',
      discoveredAt: new Date(),
      mitigationSteps: [...]
    });
  }
}

// National SSO Integration
class NationalSSOService {
  async authenticateWithThaiD(authCode) {
    // à¸•à¹ˆà¸­ ThaiD / DGA Authentication
    const tokenResponse = await axios.post(
      'https://imauth.bora.dopa.go.th/api/v2/oauth2/token/',
      {
        grant_type: 'authorization_code',
        code: authCode,
        client_id: process.env.THAID_CLIENT_ID,
        client_secret: process.env.THAID_CLIENT_SECRET
      }
    );

    return tokenResponse.data;
  }
}
```

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**

- âœ… PDPA compliance (100%)
- âœ… National SSO integration
- âœ… Audit logging (à¸—à¸¸à¸ action)
- âœ… Data encryption (AES-256)
- âœ… Security headers (Helmet.js)

---

### **ğŸ“… à¹€à¸Ÿà¸ª 2: Modernization & Performance (4-6 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ)**

#### **Week 7-9: Frontend Migration (Next.js 14 + Tailwind)**

```
frontend-next/                  â† Next.js App Router
  â”œâ”€â”€ app/
  â”‚   â”œâ”€â”€ (auth)/              # Auth routes
  â”‚   â”‚   â”œâ”€â”€ login/
  â”‚   â”‚   â””â”€â”€ register/
  â”‚   â”œâ”€â”€ (farmer)/            # Farmer portal
  â”‚   â”‚   â”œâ”€â”€ dashboard/
  â”‚   â”‚   â”œâ”€â”€ applications/
  â”‚   â”‚   â”œâ”€â”€ farms/
  â”‚   â”‚   â””â”€â”€ certificates/
  â”‚   â”œâ”€â”€ (dtam)/              # DTAM portal
  â”‚   â”‚   â”œâ”€â”€ dashboard/
  â”‚   â”‚   â”œâ”€â”€ applications/
  â”‚   â”‚   â””â”€â”€ staff/
  â”‚   â””â”€â”€ (public)/            # Public pages
  â”‚       â”œâ”€â”€ verify/
  â”‚       â””â”€â”€ track-trace/
  â”‚
  â”œâ”€â”€ components/
  â”‚   â”œâ”€â”€ ui/                  # shadcn/ui components
  â”‚   â”œâ”€â”€ forms/
  â”‚   â””â”€â”€ layouts/
  â”‚
  â”œâ”€â”€ lib/
  â”‚   â”œâ”€â”€ api/                 # API client
  â”‚   â”œâ”€â”€ utils/
  â”‚   â””â”€â”€ hooks/
  â”‚
  â””â”€â”€ middleware.ts            # Auth middleware
```

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**

- âœ… Next.js 14 (App Router)
- âœ… Tailwind CSS + shadcn/ui
- âœ… Server Components
- âœ… Optimized performance (Lighthouse 90+)
- âœ… SEO optimized
- âœ… Responsive design

---

#### **Week 10-12: Database Optimization**

```javascript
// MongoDB Performance Optimization
db.applications.createIndex({ status: 1, createdAt: -1 });
db.applications.createIndex({ userId: 1, status: 1 });
db.applications.createIndex({ 'farm.province': 1 });

db.certificates.createIndex({ certificateNumber: 1 }, { unique: true });
db.certificates.createIndex({ userId: 1, status: 1 });
db.certificates.createIndex({ expiryDate: 1 });

db.farms.createIndex({ 'location.coordinates': '2dsphere' });
db.farms.createIndex({ ownerId: 1 });

// Replica Set Configuration (High Availability)
rs.initiate({
  _id: 'gacp-rs',
  members: [
    { _id: 0, host: 'mongodb-primary:27017', priority: 2 },
    { _id: 1, host: 'mongodb-secondary1:27017', priority: 1 },
    { _id: 2, host: 'mongodb-secondary2:27017', priority: 1 }
  ]
});

// Sharding Strategy (Horizontal Scaling)
sh.enableSharding('gacp_production');
sh.shardCollection('gacp_production.applications', { userId: 'hashed' });
sh.shardCollection('gacp_production.farms', { 'location.province': 1 });
```

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**

- âœ… Indexed queries (< 100ms)
- âœ… Replica Set (3 nodes)
- âœ… Sharding ready
- âœ… Connection pooling
- âœ… Query optimization

---

### **ğŸ“… à¹€à¸Ÿà¸ª 3: Scale & Future-Proof (2-4 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ)**

#### **Week 13-14: Microservices Preparation**

```
# à¹à¸¢à¸ modules à¹€à¸›à¹‡à¸™ independent services (à¹€à¸¡à¸·à¹ˆà¸­à¸ˆà¸³à¹€à¸›à¹‡à¸™)

gacp-platform/
  â”œâ”€â”€ gateway/                 # API Gateway (Kong/NGINX)
  â”œâ”€â”€ services/
  â”‚   â”œâ”€â”€ auth-service/        # Port 3001
  â”‚   â”œâ”€â”€ application-service/ # Port 3002
  â”‚   â”œâ”€â”€ certificate-service/ # Port 3003
  â”‚   â”œâ”€â”€ farm-service/        # Port 3004
  â”‚   â””â”€â”€ notification-service/# Port 3005
  â”‚
  â”œâ”€â”€ shared/
  â”‚   â”œâ”€â”€ events/              # Event bus (RabbitMQ/Kafka)
  â”‚   â”œâ”€â”€ logging/             # Centralized logging
  â”‚   â””â”€â”€ monitoring/          # Prometheus + Grafana
  â”‚
  â””â”€â”€ infrastructure/
      â”œâ”€â”€ kubernetes/          # K8s manifests
      â”œâ”€â”€ terraform/           # Infrastructure as Code
      â””â”€â”€ ci-cd/               # GitHub Actions
```

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**

- âœ… Service isolation
- âœ… Independent scaling
- âœ… Event-driven communication
- âœ… Circuit breakers
- âœ… Service mesh ready (Istio)

---

#### **Week 15-16: Production Deployment**

```yaml
# Kubernetes Deployment (Government Cloud)
apiVersion: apps/v1
kind: Deployment
metadata:
  name: gacp-platform
  namespace: production
spec:
  replicas: 3
  selector:
    matchLabels:
      app: gacp-platform
  template:
    metadata:
      labels:
        app: gacp-platform
    spec:
      containers:
        - name: gacp-api
          image: gcr.io/gacp/platform:v1.0.0
          ports:
            - containerPort: 3004
          resources:
            requests:
              memory: '256Mi'
              cpu: '250m'
            limits:
              memory: '512Mi'
              cpu: '500m'
          livenessProbe:
            httpGet:
              path: /health
              port: 3004
            initialDelaySeconds: 30
            periodSeconds: 10
          readinessProbe:
            httpGet:
              path: /ready
              port: 3004
            initialDelaySeconds: 5
            periodSeconds: 5

---
apiVersion: v1
kind: Service
metadata:
  name: gacp-platform-service
spec:
  type: LoadBalancer
  selector:
    app: gacp-platform
  ports:
    - protocol: TCP
      port: 80
      targetPort: 3004

---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: gacp-platform-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: gacp-platform
  minReplicas: 3
  maxReplicas: 10
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 70
```

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**

- âœ… Kubernetes deployment
- âœ… Auto-scaling (3-10 pods)
- âœ… Load balancing
- âœ… Health checks
- âœ… Rolling updates
- âœ… Blue-Green deployment

---

## ğŸ“ˆ Key Performance Indicators (KPIs)

### **Technical KPIs**

```
âœ… API Response Time: < 200ms (p95)
âœ… Uptime: 99.9% (8.76 hrs downtime/year)
âœ… Error Rate: < 0.1%
âœ… Test Coverage: > 80%
âœ… Security Score: A+ (OWASP)
âœ… Lighthouse Score: > 90
âœ… Concurrent Users: 10,000+
âœ… Transactions/sec: 1,000+
```

### **Business KPIs**

```
âœ… Time to Certificate: < 30 days (from 60 days)
âœ… User Satisfaction: > 4.5/5
âœ… Mobile Usage: > 60%
âœ… Support Tickets: < 5% of users
âœ… Data Accuracy: 99.9%
```

---

## ğŸ’° à¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“à¹à¸¥à¸°à¸—à¸£à¸±à¸à¸¢à¸²à¸à¸£

### **à¹€à¸Ÿà¸ª 1: Foundation (4-6 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ)**

- **à¸—à¸µà¸¡à¸à¸±à¸’à¸™à¸²:** 3-4 à¸„à¸™ (SA, SE, SE, QA)
- **à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢:** ~300,000 à¸šà¸²à¸—

### **à¹€à¸Ÿà¸ª 2: Modernization (4-6 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ)**

- **à¸—à¸µà¸¡à¸à¸±à¸’à¸™à¸²:** 4-5 à¸„à¸™ (SA, SE x2, FE, QA)
- **à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢:** ~400,000 à¸šà¸²à¸—

### **à¹€à¸Ÿà¸ª 3: Scale & Deploy (2-4 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ)**

- **à¸—à¸µà¸¡à¸à¸±à¸’à¸™à¸²:** 3-4 à¸„à¸™ (SA, DevOps, SE, QA)
- **à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢:** ~250,000 à¸šà¸²à¸—
- **Infrastructure:** ~100,000 à¸šà¸²à¸—/à¹€à¸”à¸·à¸­à¸™ (Gov Cloud)

### **à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸ªà¸´à¹‰à¸™**

- **à¹€à¸§à¸¥à¸²:** 10-16 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ (2.5-4 à¹€à¸”à¸·à¸­à¸™)
- **à¸‡à¸šà¸›à¸£à¸°à¸¡à¸²à¸“:** ~950,000 à¸šà¸²à¸— (à¸à¸±à¸’à¸™à¸²) + 100,000 à¸šà¸²à¸—/à¹€à¸”à¸·à¸­à¸™ (à¸”à¸¹à¹à¸¥à¸£à¸±à¸à¸©à¸²)

---

## ğŸ“ à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¹à¸¥à¸°à¸à¸²à¸£à¸£à¸±à¸šà¸£à¸­à¸‡

### **à¸£à¸°à¸”à¸±à¸šà¸›à¸£à¸°à¹€à¸—à¸¨**

- âœ… DGA Standards Compliant
- âœ… Government Cloud Ready
- âœ… PDPA Certified
- âœ… NSO (National SSO) Integrated

### **à¸£à¸°à¸”à¸±à¸šà¸ªà¸²à¸à¸¥**

- âœ… ISO/IEC 27001 (Information Security)
- âœ… ISO 9001 (Quality Management)
- âœ… GS1 Standards (Traceability)
- âœ… OWASP Top 10 Protected

### **à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¹€à¸‰à¸à¸²à¸°à¸”à¹‰à¸²à¸™**

- âœ… GAP/GACP Standards (DOA)
- âœ… FDA Thailand Compliant
- âœ… Cannabis Act Compliant
- âœ… THC/CBD Testing Standards

---

## ğŸš€ à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ Phase 1

### **Sprint 1: Week 1-2**

```bash
# 1. Clean Architecture Restructure
npm run migrate:clean-architecture

# 2. Setup Testing Infrastructure
npm install --save-dev jest @testing-library/react
npm run test:setup

# 3. Generate OpenAPI Documentation
npm run api:generate-docs

# 4. Setup Monitoring
npm install --save winston prom-client
```

### **Deliverables:**

1. âœ… Clean Architecture structure (11 modules)
2. âœ… Unit tests (> 80% coverage)
3. âœ… OpenAPI 3.0 documentation
4. âœ… Monitoring setup (Winston + Prometheus)
5. âœ… CI/CD pipeline (GitHub Actions)

---

## ğŸ“ à¸•à¸´à¸”à¸•à¹ˆà¸­à¹à¸¥à¸°à¸ªà¸™à¸±à¸šà¸ªà¸™à¸¸à¸™

**GACP Platform Development Team**

- **Email:** dev@gacp.go.th
- **Hotline:** 02-XXX-XXXX
- **GitHub:** github.com/jonmaxmore/gacp-certify-flow-main
- **Documentation:** docs.gacp.go.th

---

**à¸ˆà¸±à¸”à¸—à¸³à¹‚à¸”à¸¢:** System Architect  
**à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹‚à¸”à¸¢:** [à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´]  
**à¸§à¸±à¸™à¸—à¸µà¹ˆ:** 12 à¸•à¸¸à¸¥à¸²à¸„à¸¡ 2568

---

## ğŸ¯ à¸ªà¸£à¸¸à¸›

> **"à¸£à¸°à¸šà¸š GACP Platform à¸–à¸¹à¸à¸­à¸­à¸à¹à¸šà¸šà¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¸£à¸°à¸”à¸±à¸šà¸›à¸£à¸°à¹€à¸—à¸¨
> à¸à¸£à¹‰à¸­à¸¡à¸‚à¸¢à¸²à¸¢à¹€à¸›à¹‡à¸™à¹à¸à¸¥à¸•à¸Ÿà¸­à¸£à¹Œà¸¡à¸à¸¥à¸²à¸‡à¸ªà¸³à¸«à¸£à¸±à¸šà¸¡à¸²à¸•à¸£à¸à¸²à¸™à¸à¸²à¸£à¹€à¸à¸©à¸•à¸£à¹„à¸—à¸¢
> à¹‚à¸”à¸¢à¹ƒà¸Šà¹‰à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡ Modular Monolith à¸—à¸µà¹ˆà¸¢à¸±à¹ˆà¸‡à¸¢à¸·à¸™
> à¹à¸¥à¸°à¸à¸£à¹‰à¸­à¸¡ migrate à¹€à¸›à¹‡à¸™ Microservices à¹€à¸¡à¸·à¹ˆà¸­à¸ˆà¸³à¹€à¸›à¹‡à¸™"**

**à¸¡à¸²à¸£à¹ˆà¸§à¸¡à¸ªà¸£à¹‰à¸²à¸‡à¸¡à¸²à¸•à¸£à¸à¸²à¸™à¹€à¸à¸©à¸•à¸£à¹„à¸—à¸¢à¹ƒà¸«à¹‰à¸à¹‰à¸²à¸§à¹„à¸à¸¥à¹„à¸›à¸”à¹‰à¸§à¸¢à¸à¸±à¸™! ğŸ‡¹ğŸ‡­ğŸŒ¿**
