{"numFailedTestSuites":1,"numFailedTests":2,"numPassedTestSuites":0,"numPassedTests":0,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":2,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1764809262266,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["ApplicationWorkflowEngine Integration","New Application Flow"],"duration":1721,"failureDetails":[{}],"failureMessages":["Error: Role DTAM_REVIEWER cannot perform this transition\n    at ApplicationWorkflowEngine.approveForPayment (C:\\Users\\usEr\\Documents\\GitHub\\GACP-Certification-Application\\apps\\backend\\modules\\application-workflow\\domain\\workflow-engine.js:207:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\Users\\usEr\\Documents\\GitHub\\GACP-Certification-Application\\apps\\backend\\modules\\application-workflow\\domain\\__tests__\\workflow-engine.test.js:159:19)"],"fullName":"ApplicationWorkflowEngine Integration New Application Flow should complete the full happy path","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"failed","title":"should complete the full happy path"},{"ancestorTitles":["ApplicationWorkflowEngine Integration","Penalty Logic"],"duration":540,"failureDetails":[{"validationResult":{"valid":false,"errors":["Missing required document: Land ownership document (Form 10)","Missing required document: Farmer identification card","Missing required document: Farm site photos (minimum 5 photos)","Farm site photos (minimum 5 photos) requires minimum 5 files, found 0","Missing required document: Water quality test report"],"warnings":["Recommended document missing: Soil analysis report","Recommended document missing: GACP Training Certificate (Form 11)"]}}],"failureMessages":["Error: Application submission validation failed\n    at ApplicationWorkflowEngine._validateSubmissionRequirements (C:\\Users\\usEr\\Documents\\GitHub\\GACP-Certification-Application\\apps\\backend\\modules\\application-workflow\\domain\\workflow-engine.js:1087:21)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at ApplicationWorkflowEngine.submitApplication (C:\\Users\\usEr\\Documents\\GitHub\\GACP-Certification-Application\\apps\\backend\\modules\\application-workflow\\domain\\workflow-engine.js:165:7)\n    at Object.<anonymous> (C:\\Users\\usEr\\Documents\\GitHub\\GACP-Certification-Application\\apps\\backend\\modules\\application-workflow\\domain\\__tests__\\workflow-engine.test.js:265:19)"],"fullName":"ApplicationWorkflowEngine Integration Penalty Logic should trigger penalty after 3 revisions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should trigger penalty after 3 revisions"}],"endTime":1764809265856,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mApplicationWorkflowEngine Integration › New Application Flow › should complete the full happy path\u001b[39m\u001b[22m\n\n    Role DTAM_REVIEWER cannot perform this transition\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 205 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 206 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mvalidation\u001b[33m.\u001b[39mvalid) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 207 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(validation\u001b[33m.\u001b[39mmessage)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 208 |\u001b[39m       }\u001b[22m\n\u001b[2m     \u001b[90m 209 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 210 |\u001b[39m       \u001b[90m// Update application with review data\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat ApplicationWorkflowEngine.approveForPayment (\u001b[22m\u001b[2mmodules/application-workflow/domain/workflow-engine.js\u001b[2m:207:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/application-workflow/domain/__tests__/workflow-engine.test.js\u001b[39m\u001b[0m\u001b[2m:159:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mApplicationWorkflowEngine Integration › Penalty Logic › should trigger penalty after 3 revisions\u001b[39m\u001b[22m\n\n    Application submission validation failed\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 1085 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1086 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mvalidationResult\u001b[33m.\u001b[39mvalid) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 1087 |\u001b[39m       \u001b[36mconst\u001b[39m error \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'Application submission validation failed'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m      |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1088 |\u001b[39m       error\u001b[33m.\u001b[39mvalidationResult \u001b[33m=\u001b[39m validationResult\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1089 |\u001b[39m       \u001b[36mthrow\u001b[39m error\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 1090 |\u001b[39m     }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat ApplicationWorkflowEngine._validateSubmissionRequirements (\u001b[22m\u001b[2mmodules/application-workflow/domain/workflow-engine.js\u001b[2m:1087:21)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat ApplicationWorkflowEngine.submitApplication (\u001b[22m\u001b[2mmodules/application-workflow/domain/workflow-engine.js\u001b[2m:165:7)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/application-workflow/domain/__tests__/workflow-engine.test.js\u001b[39m\u001b[0m\u001b[2m:265:19)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\usEr\\Documents\\GitHub\\GACP-Certification-Application\\apps\\backend\\modules\\application-workflow\\domain\\__tests__\\workflow-engine.test.js","startTime":1764809262299,"status":"failed","summary":""}],"wasInterrupted":false}
